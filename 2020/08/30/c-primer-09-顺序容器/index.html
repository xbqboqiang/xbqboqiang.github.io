<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>c++ primer 09 顺序容器 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="顺序容器(sequential container)vector:可变大小数组。支持快速随机访问。在尾部之外位置插入删除元素可能很慢deque:双端队列。支持快速随机访问。在头尾位置插入删除速度很快list;双向列表。只支持双向顺序访问。在任何位置插入删除操作速度都很快forward_list:单向列表。只支持单向顺序访问。在任何位置插入删除操作速度都很快array:固定大小数组。支持快速随机访问">
<meta property="og:type" content="article">
<meta property="og:title" content="c++ primer 09 顺序容器">
<meta property="og:url" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="顺序容器(sequential container)vector:可变大小数组。支持快速随机访问。在尾部之外位置插入删除元素可能很慢deque:双端队列。支持快速随机访问。在头尾位置插入删除速度很快list;双向列表。只支持双向顺序访问。在任何位置插入删除操作速度都很快forward_list:单向列表。只支持单向顺序访问。在任何位置插入删除操作速度都很快array:固定大小数组。支持快速随机访问">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/%E6%8D%95%E8%8E%B7.png">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/%E6%8D%95%E8%8E%B71.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/2%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/3%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/4%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/5%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/6%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/7%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/8%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/9%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/10%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/11%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/image.png?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/12%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/13%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/14%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/15%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/16%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/17%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/18%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="og:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/19%E6%8D%95%E8%8E%B7.PNG?v=1&type=image">
<meta property="article:published_time" content="2020-08-30T01:40:30.000Z">
<meta property="article:modified_time" content="2020-08-30T02:32:56.193Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="c++ primer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/%E6%8D%95%E8%8E%B7.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-c-primer-09-顺序容器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/" class="article-date">
  <time datetime="2020-08-30T01:40:30.000Z" itemprop="datePublished">2020-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      c++ primer 09 顺序容器
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="顺序容器-sequential-container"><a href="#顺序容器-sequential-container" class="headerlink" title="顺序容器(sequential container)"></a>顺序容器(sequential container)</h1><p>vector:可变大小数组。支持快速随机访问。在尾部之外位置插入删除元素可能很慢<br>deque:双端队列。支持快速随机访问。在头尾位置插入删除速度很快<br>list;双向列表。只支持双向顺序访问。在任何位置插入删除操作速度都很快<br>forward_list:单向列表。只支持单向顺序访问。在任何位置插入删除操作速度都很快<br>array:固定大小数组。支持快速随机访问。不能添加或删除元素<br>string:与vector相似，但专门用于保存字符。随机访问快。在尾部插入删除速度快</p>
<p>选择容器基本原则：<br>首选vector<br>有很多小元素，空间的额外开销很重要，不要用list或forward_list<br>在中间插入或删除，用list或forward_list<br>只在头尾插入或删除，用deque</p>
<h3 id="容器操作"><a href="#容器操作" class="headerlink" title="容器操作"></a>容器操作</h3><p><img src="./c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/%E6%8D%95%E8%8E%B7.png" alt="输入图片描述"></p>
<p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/%E6%8D%95%E8%8E%B71.PNG?v=1&type=image" alt="输入图片描述"></p>
<p>使用左闭合范围<br>如果begin与end相等，则范围为空；begin与end不等，则至少包含一个元素，且begin指向范围中的第一个元素；可以对begin递增若干次，使得begin==end</p>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list&lt;string&gt;::iterator iter;    vector&lt;int&gt;::difference_type count;</span><br><span class="line"></span><br><span class="line">a.begin() &#x2F; rbegin() &#x2F; cbegin() &#x2F; crbegin()</span><br><span class="line">auto it &#x3D; a.begin(); &#x2F;&#x2F;仅当a是const时，it是const_iterator</span><br></pre></td></tr></table></figure>
<h3 id="容器定义和初始化"><a href="#容器定义和初始化" class="headerlink" title="容器定义和初始化"></a>容器定义和初始化</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/2%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<p>创建一个容器为另一个的拷贝，两个容器的类型及元素类型必须匹配，传递迭代器参数拷贝范围时不要求，能转换即可;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list&lt;string&gt; authors &#x3D; &#123; &quot;ab&quot;,&quot;cd&quot;,&quot;ef&quot;&#125;;</span><br><span class="line">vector&lt;const char*&gt;articles &#x3D; &#123; &quot;a&quot;,&quot;an&quot;,&quot;the&quot; &#125;;</span><br><span class="line">list&lt;string&gt;list2(authors); &#x2F;&#x2F;正确：类型匹配</span><br><span class="line">deque&lt;string&gt;authList(authors); &#x2F;&#x2F;错误：容器类型不匹配</span><br><span class="line">vector&lt;string&gt;words(atricles); &#x2F;&#x2F;错误：容器类型必须匹配</span><br><span class="line">forward_list&lt;string&gt;words(articles.begin(), articles.end()); &#x2F;&#x2F;正确：可以将const char*转换为string</span><br></pre></td></tr></table></figure>
<p>如果元素类型是内置类型或者具有默认构造函数的类类型，可以值为构造函数提供一个容器大小参数；如果没有默认构造函数，还必须指定一个显式的元素初始值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">array&lt;string, 10&gt; &#x2F;&#x2F;类型为保存10个string的数组</span><br><span class="line">array&lt;int, 10&gt;::size_type i; &#x2F;&#x2F;正确  </span><br><span class="line">array&lt;int&gt;::size_type j; &#x2F;&#x2F;错误：array&lt;int&gt;不是一个类型</span><br><span class="line">array&lt;int,3&gt;ia1; &#x2F;&#x2F;10个默认初始化的int</span><br><span class="line">array&lt;int,3&gt;ia2 &#x3D; &#123; 0,1,2 &#125;; &#x2F;&#x2F;列表初始化</span><br><span class="line">array&lt;int, 3&gt;ia3 &#x3D; &#123; 1 &#125;; &#x2F;&#x2F;ia3[0]为1，其余元素为0</span><br><span class="line">不能对内置数组类型进行拷贝或对象赋值，但array可以</span><br><span class="line">array&lt;int, 3&gt;digs &#x3D; &#123; 1,2,3 &#125;;</span><br><span class="line">array&lt;int, 3&gt;copy &#x3D; digs;</span><br></pre></td></tr></table></figure>
<h3 id="赋值和swap"><a href="#赋值和swap" class="headerlink" title="赋值和swap"></a>赋值和swap</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/3%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c1 &#x3D; c2; &#x2F;&#x2F;将c1的内存替换为c2中元素的拷贝，c1大小变为c2的大小</span><br><span class="line">c1 &#x3D; &#123; a,b,c &#125;;</span><br><span class="line">array&lt;int, 3&gt;a1 &#x3D; &#123; 1,2,3 &#125;;</span><br><span class="line">array&lt;int, 3&gt;a2 &#x3D; &#123; 0 &#125;;</span><br><span class="line">a1 &#x3D; a2; &#x2F;&#x2F;替换a1中的元素</span><br><span class="line">a2 &#x3D; &#123; 0 &#125;; &#x2F;&#x2F;错误：不能讲一个花括号列表赋予数组</span><br></pre></td></tr></table></figure>
<p>赋值相关运算会导致指向左边容器内部的迭代器、引用和指针失效，而swap操作不会(array和string除外)</p>
<p>顺序容器(array除外)定义了一个assign成员，允许从一个不同但相容的类型赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list&lt;string&gt;names; vector&lt;const char*&gt;oldstyle;</span><br><span class="line">names &#x3D; oldstyle; &#x2F;&#x2F;错误：容器类型不匹配</span><br><span class="line">names.assign(oldstyle.begin(), oldstyle.end()); &#x2F;&#x2F;正确：可以将const char*转换成string</span><br><span class="line"></span><br><span class="line">list&lt;string&gt;slist1(1); &#x2F;&#x2F;1个元素，为空string</span><br><span class="line">slist1.assign(10, &quot;hi&quot;); &#x2F;&#x2F;10个元素，“hi”</span><br><span class="line">等价于slist1.clear(); slist1.insert(slist1.begin(), 10, &quot;hi&quot;);</span><br></pre></td></tr></table></figure>
<p>swap操作交换两个相同类型容器的内容。除array外，操作会很快，元素本身并未交换，只是交换了内部数据结构<br>除string外，指向容器的迭代器、引用和指针在swap后都不会失效</p>
<p>除forward_list外，都有size, empty, max_size(返回一个大于或等于该类型容器所能容纳的最大元素的值)。forward_list只有max_size和empty</p>
<p>每个容器类型都支持相等运算符(==/!=)；除无序关联容器外都支持关系运算符(&gt;/&gt;=/&lt;/&lt;=)。必须是相同类型容器，相同类型的元素<br>比较结果取决于第一个不相等的元素的比较结果</p>
<h3 id="向顺序容器中添加元素"><a href="#向顺序容器中添加元素" class="headerlink" title="向顺序容器中添加元素"></a>向顺序容器中添加元素</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/4%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<p>插入容器后若容器没有扩容、该元素没有改变位置，不会使其失效<br>当我们用一个对象来初始化容器，或将一个对象插入到容器中时，实际上放入到容器中的是对象的一个拷贝，而不是对象本身</p>
<p>当调用push或insert成员函数时，我们将元素类型的对象传递给它们，这些对象被拷贝到容器中。<br>当我们调用emplace成员函数时，则是将参数传递给元素类型的构造函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c.emplace_back(&quot;99-9999&quot;,25,15.99); &#x2F;&#x2F;使用三个参数的Sales_data构造函数</span><br><span class="line">c.push_back((&quot;99-9999&quot;, 25, 15.99); &#x2F;&#x2F;错误：没有接受三个参数的push_back版本</span><br><span class="line">c.push_back(Sales_data((&quot;99-9999&quot;, 25, 15.99)); &#x2F;&#x2F;正确：创建一个临时的Sales_data对象传递给push_back</span><br></pre></td></tr></table></figure>
<p>调用emplace_back时会在容器管理的内存空间中直接创建对象；而调用push_back则会创建一个局部临时对象，并将其压入容器中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">emplace函数的参数根据元素类型而变化，参数必须与元素类型的构造函数相匹配</span><br><span class="line">c.emplace_back(); &#x2F;&#x2F;使用Sales_data的默认构造函数</span><br><span class="line">c.emplace(iter, &quot;99-9999&quot;); &#x2F;&#x2F;使用Sales_data(string)</span><br><span class="line">c.emplace_front(&quot;99-9999&quot;, 25, 15.99); &#x2F;&#x2F;使用Sales_data的接受一个ISBN、一个count和一个price的构造函数</span><br></pre></td></tr></table></figure>
<h3 id="访问元素"><a href="#访问元素" class="headerlink" title="访问元素"></a>访问元素</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/5%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (!c.empty()) &#123;</span><br><span class="line">	auto val &#x3D; *c.begin(); val2 &#x3D; c.front();</span><br><span class="line">	auto last &#x3D; c.end();</span><br><span class="line">	auto val3 &#x3D; *(--c.end());</span><br><span class="line">	auto val4 &#x3D; c.back();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在容器中访问元素的成员函数(fornt,back,下标和at)返回的都是引用，容器是一个const对象则返回值是const的引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if (!c.empty()) &#123;</span><br><span class="line">	c.front() &#x3D; 42;</span><br><span class="line">	auto&amp; v &#x3D; c.back(); &#x2F;&#x2F;获得指向最后一个元素的引用</span><br><span class="line">	v &#x3D; 1024; &#x2F;&#x2F;改变c中元素</span><br><span class="line">	auto v2 &#x3D; c.back(); &#x2F;&#x2F;v2不是引用，是c.back()的一个拷贝</span><br><span class="line">	v2 &#x3D; 0; &#x2F;&#x2F;不改变c中元素</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>at成员函数类似下标运算符，但越界是会抛出一个out_of_range异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;int&gt;v;</span><br><span class="line">cout &lt;&lt; v[0]; &#x2F;&#x2F;运行时错误</span><br><span class="line">cout &lt;&lt; v.at(0); &#x2F;&#x2F;抛出一个out_of_range异常</span><br></pre></td></tr></table></figure>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/6%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/7%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<h3 id="改变容器大小"><a href="#改变容器大小" class="headerlink" title="改变容器大小"></a>改变容器大小</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/8%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<h3 id="管理容量的成员函数"><a href="#管理容量的成员函数" class="headerlink" title="管理容量的成员函数"></a>管理容量的成员函数</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/9%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br>reserve分配的大小小于等于当前容量时，reserve什么也不错。resize成员函数值改变容器中元素的数目，而不是容量</p>
<h3 id="构造string的其他方法"><a href="#构造string的其他方法" class="headerlink" title="构造string的其他方法"></a>构造string的其他方法</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/10%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const char* cp &#x3D; &quot;hello world!!!&quot;;</span><br><span class="line">char noNull[] &#x3D; &#123; &#39;h&#39;,&#39;i&#39; &#125;;</span><br><span class="line">string s1(cp); &#x2F;&#x2F;拷贝cp重点字符直到遇到空字符；s1&#x3D;&#x3D;&quot;hello world!!!&quot;</span><br><span class="line">string s2(noNull, 2); &#x2F;&#x2F;从noNull拷贝两个字符 &quot;hi&quot;</span><br><span class="line">string s3(noNUll); &#x2F;&#x2F;未定义：noNull不是以空字符结束</span><br><span class="line">string s4(cp + 6, 5); &#x2F;&#x2F;从cp[6]开始拷贝5个字符 &quot;world&quot;</span><br><span class="line">string s5(s1, 6, 5); &#x2F;&#x2F;从s1[6]开始拷贝5个字符 &quot;world&quot;</span><br><span class="line">string s6(s1, 6); &#x2F;&#x2F;从s1[6]开始拷贝到末尾 &quot;world!!!&quot;</span><br><span class="line">string s7(s1, 6, 20); </span><br><span class="line">string s8(s1, 16); &#x2F;&#x2F;抛出out_of_range异常</span><br><span class="line">从const char* 创建string时，指针指向的数组必须以空字符结尾，或者再传递一个合适的计数值</span><br></pre></td></tr></table></figure>
<h3 id="substr操作"><a href="#substr操作" class="headerlink" title="substr操作"></a>substr操作</h3><p>s.substr(pos, n) 返回一个string，包含s中从pos开始的n个字符的拷贝。pos的默认值为0。n的默认值为s.size() - pos，即拷贝从pos开始的所有字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">string s(&quot;hello world&quot;);</span><br><span class="line">string s2 &#x3D; s.substr(0, 5); &#x2F;&#x2F;hello</span><br><span class="line">string s3 &#x3D; s.substr(6); &#x2F;&#x2F;world</span><br><span class="line">string s4 &#x3D; s.substr(6, 11); &#x2F;&#x2F;world</span><br><span class="line">string s5 &#x3D; s.substr(12); &#x2F;&#x2F;out_of_range</span><br><span class="line"></span><br><span class="line">s.insert(s.size(), 5, &#39;!&#39;); &#x2F;&#x2F;在s末尾插入5个&#39;!&#39;</span><br><span class="line">s.erase(s.size() - 5, 5); &#x2F;&#x2F;从s删除最后5个字符</span><br><span class="line"></span><br><span class="line">const char* cp &#x3D; &quot;Stately, plump Buck&quot;;</span><br><span class="line">s.assign(cp, 7); &#x2F;&#x2F;s&#x3D;&#x3D;&quot;Stately&quot; 赋值从cp开始的7个字符</span><br><span class="line">s.insert(s.size(), cp + 7); &#x2F;&#x2F;s&#x3D;&#x3D;&quot;Stately, plump Buck&quot;  将cp+7开始的字符拷贝到s后面</span><br><span class="line"></span><br><span class="line">string s &#x3D; &quot;Some string&quot;, s2 &#x3D; &quot;some other string&quot;;</span><br><span class="line">s.insert(0, s2); &#x2F;&#x2F;在s的0位置前插入s2</span><br><span class="line">s.insert(0, s2, 0, s2.size()); &#x2F;&#x2F;在s的0位置前插入s2的从0开始s2.size()个字符</span><br></pre></td></tr></table></figure>
<p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/11%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/image.png?v=1&type=image" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.replace(a, b, s2); &#x2F;&#x2F;从s的a位置开始删除b个字符，并在该位置插入s2</span><br></pre></td></tr></table></figure>
<h3 id="string搜索操作"><a href="#string搜索操作" class="headerlink" title="string搜索操作"></a>string搜索操作</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/12%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/13%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br>每个搜索操作都返回一个string::size_type值，表示匹配发生位置的下标。搜索失败则返回名为string::nops的static成员。nops等于任何string最大的可能大小<br>返回值是unsigned类型，一般不用int或其他带符号类型来保存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">string name(&quot;AnnaBelle&quot;); </span><br><span class="line">auto pos &#x3D; name.find(&quot;Anna&quot;); &#x2F;&#x2F;pos&#x3D;&#x3D;0</span><br><span class="line">auto pos1 &#x3D; name.find(&quot;anna&quot;); &#x2F;&#x2F;pos&#x3D;&#x3D;nops</span><br><span class="line"></span><br><span class="line">string numbers(&quot;0123456789&quot;), name(&quot;r2d2&quot;), dept(&quot;01714p3&quot;);</span><br><span class="line">auto pos &#x3D; name.find_first_of(numbers); &#x2F;&#x2F;pos&#x3D;&#x3D;1</span><br><span class="line">auto pos &#x3D; name.find_first_not_of(numbers); &#x2F;&#x2F;pos&#x3D;&#x3D;5</span><br></pre></td></tr></table></figure>
<h3 id="指定开始搜索的位置"><a href="#指定开始搜索的位置" class="headerlink" title="指定开始搜索的位置"></a>指定开始搜索的位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">string::size_type pos &#x3D; 0;</span><br><span class="line">while ((pos &#x3D; name.find_first_of(numbers, pos)) !&#x3D; string::nops) &#123;</span><br><span class="line">	cout &lt;&lt; &quot;found number at index: &quot; &lt;&lt; pos &lt;&lt; &quot; elem is &quot; &lt;&lt; name[pos] &lt;&lt; endl;</span><br><span class="line">	++pos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="逆向搜索"><a href="#逆向搜索" class="headerlink" title="逆向搜索"></a>逆向搜索</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string river(&quot;Mississippi&quot;);</span><br><span class="line">auto first_pos&#x3D;river.find_first(&quot;is&quot;); &#x2F;&#x2F;返回1</span><br><span class="line">auto last_pos &#x3D; river.find_last(&quot;is&quot;); &#x2F;&#x2F;返回4</span><br></pre></td></tr></table></figure>
<h3 id="compare函数"><a href="#compare函数" class="headerlink" title="compare函数"></a>compare函数</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/14%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br>返回负数、0、正数</p>
<h3 id="数值转换"><a href="#数值转换" class="headerlink" title="数值转换"></a>数值转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int i &#x3D; 42;</span><br><span class="line">string s &#x3D; to_string(i); &#x2F;&#x2F;将整数i转换为字符表示形式</span><br><span class="line">double d &#x3D; stod(s); &#x2F;&#x2F;将字符串s转换为浮点数</span><br></pre></td></tr></table></figure>
<p>要转换为数值的string中第一个非空白符必须是数值中可能出现的字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string s2 &#x3D; &quot;pi&#x3D;3.14&quot;;</span><br><span class="line">d &#x3D; stod(s2.substr(s2.find_first_of(&quot;+-.0123456789&quot;))); &#x2F;&#x2F;d&#x3D;3.14</span><br></pre></td></tr></table></figure>
<p>如果string不能转换为一个数值，则抛出一个invalid_argument异常；数值无法用任何类型来表示则抛出out_of_range异常<br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/15%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<h3 id="容器适配器"><a href="#容器适配器" class="headerlink" title="容器适配器"></a>容器适配器</h3><p>标准库还定义了三个顺序容器适配器：stack、queue和priority_queue。本质上一个适配器是一种机制，能使某种事物的行为看起来像另外一种事物<br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/16%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br>默认情况下，stack和queue是基于deque实现的，priority_queue是在vector之上实现的<br>定义一个适配器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deque&lt;int&gt;deq;</span><br><span class="line">stack&lt;int&gt; stk(deq); &#x2F;&#x2F;从deq拷贝元素到stk</span><br></pre></td></tr></table></figure>
<p>我们可以再创建一个适配器时将一个命名的顺序容器作为第二个类型参数，来重载默认容器类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stack&lt;int, vector&lt;string&gt;&gt;str_stk(sevc); &#x2F;&#x2F;str_stk在vector上实现，初始化时保存svec的拷贝</span><br></pre></td></tr></table></figure>
<p>因为所有适配器都要求容器具有添加、删除以及访问尾元素的能力，所以不能用array和forward_list来构造适配器<br>stack只要求push_back、pop_back和back操作–》使用除array和forward_list之外的任何容器类型来构造<br>queue要求back、push_back, front和push_front–》list或deque，不能用vector<br>priority_queue要求front, push_back, pop_back和随机访问能力–》vector或deque，不能用list</p>
<h3 id="栈适配器"><a href="#栈适配器" class="headerlink" title="栈适配器"></a>栈适配器</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/17%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">stack&lt;int&gt; intStack;</span><br><span class="line">for (size_t ix &#x3D; 0; ix &lt; 10; ++ix) </span><br><span class="line">	intStack.push(ix);</span><br><span class="line">while (!intStack.empty()) &#123;</span><br><span class="line">	int value &#x3D; intStack.top();</span><br><span class="line">	intStack.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="队列适配器"><a href="#队列适配器" class="headerlink" title="队列适配器"></a>队列适配器</h3><p><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/18%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"><br><img src="c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8_md_files/19%E6%8D%95%E8%8E%B7.PNG?v=1&type=image" alt="输入图片描述"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/30/c-primer-09-%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/" data-id="ckhkofavi000h5kve36xr1y7k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-primer/" rel="tag">c++ primer</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/08/30/c-primer-10-%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          c++ primer 10 泛型算法
        
      </div>
    </a>
  
  
    <a href="/2020/08/12/problem-library-%E5%93%88%E5%B8%8C-02/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">problem library 哈希 02</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/c-primer/" rel="tag">c++ primer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocos2d-x/" rel="tag">cocos2d-x</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cpp-notes/" rel="tag">cpp notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/problem-library/" rel="tag">problem library</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading-notes-DS/" rel="tag">reading notes DS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%82%93%E4%BF%8A%E8%BE%89/" rel="tag">数据结构 邓俊辉</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/c-primer/" style="font-size: 15px;">c++ primer</a> <a href="/tags/cocos2d-x/" style="font-size: 12.5px;">cocos2d-x</a> <a href="/tags/cpp-notes/" style="font-size: 20px;">cpp notes</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/problem-library/" style="font-size: 15px;">problem library</a> <a href="/tags/reading-notes-DS/" style="font-size: 10px;">reading notes DS</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%82%93%E4%BF%8A%E8%BE%89/" style="font-size: 17.5px;">数据结构 邓俊辉</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/10/27/mysql/">mysql</a>
          </li>
        
          <li>
            <a href="/2020/08/30/c-primer-16-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/">c++ primer 16 模板与泛型编程</a>
          </li>
        
          <li>
            <a href="/2020/08/30/c-primer-15-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">c++ primer 15 面向对象程序设计</a>
          </li>
        
          <li>
            <a href="/2020/08/30/c-primer-14-%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">c++ primer 14 重载运算符与类型转换</a>
          </li>
        
          <li>
            <a href="/2020/08/30/c-primer-13-%E6%8B%B7%E8%B4%9D%E6%8E%A7%E5%88%B6/">c++ primer 13 拷贝控制</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>